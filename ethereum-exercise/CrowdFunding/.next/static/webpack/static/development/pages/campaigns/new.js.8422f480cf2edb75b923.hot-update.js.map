{"version":3,"file":"static/webpack/static/development/pages/campaigns/new.js.8422f480cf2edb75b923.hot-update.js","sources":["webpack:///./pages/campaigns/new.js"],"sourcesContent":["import React, { Component } from 'react';\nimport {Form, Input, Button, Message} from 'semantic-ui-react';\nimport factory from '../../contracts/factory';\nimport Layout from '../../components/Layout';\nimport web3 from '../../contracts/web3';\nimport { Router } from '../../routes';\n\nclass CampaignNew extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            minimumContribution: 0,\n            errorMsg : '',\n            loading: false\n        };\n    }\n\n    onSubmit = async (event) => {\n        event.preventDefault();\n\n        this.setState({ loading : true });\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            console.log(accounts);\n            await factory.methods.createCampaign(this.state.minimumContribution).send({\n                    from : accounts[0]\n            }).on('transactionHash', function(hash){\n                console.log('hash >> ', hash);\n            }).on('receipt', function(receipt){\n                console.log('receipt >> ', receipt);\n            }).on('confirmation', function(confirmationNumber, receipt){\n                console.log('confirmation >> ', confirmationNumber);\n                if(confirmationNumber === 24) { console.log('') }\n            }).on('error', console.error);\n\n            // 인덱스 페이지로 이동...\n            Router.pushRoute('/');\n        } catch (err) {\n            console.log(err);\n            this.setState({ errorMsg : err.message });\n        }\n\n        this.setState({ loading : false });\n    };\n\n    render() {\n        return (\n            <Layout>\n                <h4>펀딩 만들기</h4>\n                <Form onSubmit={this.onSubmit} error={!!this.state.errorMsg}>\n                    <Form.Field>\n                        <label>최소 펀딩 금액</label>\n                        <Input\n                            label=\"wei\"\n                            labelPosition=\"right\"\n                            placeholder='최소 금액을 설정'\n                            value={this.state.minimumContribution}\n                            onChange={event => this.setState({minimumContribution:event.target.value})}\n                        />\n                    </Form.Field>\n                    <Button loading={this.state.loading} primary>만들기</Button>\n                    <Message error header=\"<ERROR>\" content={this.state.errorMsg} />\n                </Form>\n            </Layout>\n        );\n    }\n}\n\nexport default CampaignNew;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAMA;AACA;AAPA;AAAA;AASA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAlBA;AAmBA;AACA;AApBA;AAAA;AACA;AADA;AAAA;AAAA;AAsBA;AACA;AAAA;AAAA;AAAA;AACA;AAxBA;AA0BA;AAAA;AAAA;AACA;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAVA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AA8BA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AALA;AAQA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;;;;AA5DA;AACA;AA8DA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}